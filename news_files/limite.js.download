var element = document.querySelectorAll("[data-limitedText]"); for (var i = 0; i < element.length; i++) { var attrVal = parseInt(element[i].attributes["data-limitedText"].value); if (element[i].innerHTML.length > attrVal) { var findSpace = false; for (var j = attrVal - 4; j > 1; j--) { if (element[i].innerHTML.substring(j - 1, j) == " ") { findSpace = true; element[i].innerHTML = element[i].innerHTML.substring(0, j) + " ..."; break } } if (!findSpace) { element[i].innerHTML = element[i].innerHTML.substring(0, attrVal) } } };